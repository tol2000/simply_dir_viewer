{% extends 'base.html' %}

{% block title %}
Image
{% endblock %}

{% block add_style %}
{% endblock %}

{% block body %}

    {#<a href="javascript:history.back()">
        <img class="{{image_class}}" id="picture1" src="data:image/jpeg;base64,{{ img_data }}" width="" height="100%">
    </a>#}
    {#<img class="img-fluid" id="picture2" src="data:image/jpeg;base64,{{ img_data }}" width="" height="100%">#}
    <img class="{{image_class}}" id="picture" src="data:image/jpeg;base64,{{ img_data }}" width="" height="100%">

    <div class="container-fluid" style="padding-top: 10px">
        <p><a href="{{ img_subdir_link }}">(up .. to picture's dir)</a> {{image_name.lower()}}</p>
        <p><a href="{{ url_for(request.endpoint, **request.view_args)[:-1] + '?' + request.query_string.decode()}}&zoom=full">Zoom full size</a></p>
        <div>
            <table class="exif_table">
            {% for key, value in exif.items() %}
                <tr>
                    <td class="exif_table_cell" align="left">
                        {{ key }}
                    </td>
                    <td class="exif_table_cell" align="left">
                        {{ value }}
                    </td>
                </tr>
            {% endfor %}
            </table>
        </div>
    </div>
{% endblock %}

{% block after_body_contents %}
    <script>
        var pic = document.getElementById('picture')
        pic.addEventListener('click', function (event) {
            event.preventDefault()
            if (pic.style.maxHeight == '100vh' || !pic.style.maxHeight) {
                pic.style.maxHeight = 'none'
                pic.style.maxWidth = 'none'
            } else {
                pic.style.maxHeight = '100vh'
                pic.style.maxWidth = '100%'
                window.scrollTo({top:0, left:0, behavior:'instant'})
            }
        })
    </script>
{% endblock %}